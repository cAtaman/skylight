swagger: "2.0"
info:
  title: Student Management System Api
  description: A REST api that manages the student's database
  version: 1.0.0

basePath: /api

consumes:
  - application/json
produces:
  - application/json

paths:
  /login:
    post:
      tags: [Login]
      operationId: sms.users.login
      summary: User authentication
      description: Tries to login in the user while returning a token
      parameters:
        - in: body
          name: user
          schema:
            type: object
            required:
              - username
              - password
            properties:
              username:
                type: string
              password:
                type: string
      responses:
        200:
          description: Returns the user specific token
          schema:
            type: object
            properties:
              token:
                type: string

  /personal_info:
    get:
      operationId: sms.personal_info.get
      summary: Personal_info query
      description: Gets a student or a group of students bio data
      parameters:
        - name: mat_no
          in: query
          type: string
          required: true
      responses:
        200:
          description: Returns the bio data for the student or group of students
          schema:
            $ref: '#/definitions/PersonalInfo'
        404:
          description: Mat no does not exist

    post:
      operationId: sms.personal_info.post
      parameters:
        - name: student_data
          in: body
          required: true
          schema:
            $ref: '#/definitions/PersonalInfo'
      responses:
        200:
          description: Record successfully added

  /course_details:
    get:
      operationId: sms.course_details.get
      parameters:
        - in: query
          name: course_code
          type: string
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/CourseDetails'
    post:
      operationId: sms.course_details.post
      parameters:
        - in: body
          name: course
          schema:
            $ref: '#/definitions/CourseDetails'
      responses:
        200:
          description: Success

  /result_statement:
    get:
      operationId: sms.result_statement.get
      summary: Result_statement query
      description: Gets a student result statement till date
      parameters:
        - name: mat_no
          in: query
          type: string
          required: true
      responses:
        200:
          description: Returns the result statement data for a student
          schema:
            $ref: '#/definitions/ResultStatement'
        404:
          description: Mat no does not exist

  /carryovers:
    get:
      operationId: sms.utils.get_carryovers
      summary: carryover query
      description: Gets a student carryover as at present time or level if specified
      parameters:
        - name: mat_no
          in: query
          type: string
          required: true
        - in: query
          name: level
          type: integer
          required: false
      responses:
        200:
          description: Returns the carryover course codes for a student
          schema:
            $ref: '#/definitions/Carryovers'
        404:
          description: Mat no does not exist

  /course_form:
    get:
      operationId: sms.course_form.get
      parameters:
        - in: query
          name: mat_no
          type: string
          required: true
        - in: query
          name: session
          type: integer
        - in: query
          name: to_print
          type: boolean
      responses:
        200:
          description: Success
          schema:
            type: object
            properties:
              pdf:
                type: string
                description: Path to the generated course form
  /course_reg:
    get:
      operationId: sms.course_reg.get
      parameters:
        - in: query
          name: mat_no
          type: string
          required: true
        - in: query
          name: session
          type: integer
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/CourseRegistration_get'
    post:
      operationId: sms.course_reg.post
      parameters:
        - in: body
          name: course_reg
          schema:
            $ref: '#/definitions/CourseRegistration_post'
      responses:
        200:
          description: Success

definitions:
  PersonalInfo:
    type: object
    properties:
      mat_no:
        type: string
      surname:
        type: string
      othernames:
        type: string
      mode_of_entry:
        type: integer
      session_admitted:
        type: integer
      current_level:
        type: integer
      sex:
        type: string
      date_of_birth:
        type: string
      state_of_origin:
        type: string
      phone_no:
        type: string
      email_address:
        type: string
      sponsor_phone_no:
        type: string
      sponsor_email_address:
        type: string
      grad_stats:
        type: integer

  CourseDetails:
    type: object
    properties:
      course_code:
        type: string
      course_title:
        type: string
      course_credit:
        type: integer
      course_semester:
        type: integer
      course_level:
        type: integer
      teaching_dept:
        type: string

  ResultStatement:
    type: object
    properties:
      name:
        type: string
      depat:
        type: string
      dob:
        type: string
      mode_of_entry:
        type: integer
      results:
        type: array
        items:
            type: object
            properties:
                first_sem:
                    type: array
                    items: {}
                second_sem:
                    type: array
                    items: {}
      credits:
        type: array
        items:
            type: array
            items:
                type: integer
      entry_session:
        type: integer
      grad_session:
        type: string

  Carryovers:
    type: object
    properties:
        first_sem:
            type: array
            items:
                type: array
                items:
                    type: string
        second_sem:
            type: array
            items:
                type: array
                items:
                    type: string

  CourseRegistration_get:
    type: object
    properties:
      personal_info:
        type: object
        properties:
          surname:
            type: string
          othernames:
            type: string
          depat:
            type: string
          mode_of_entry:
            type: string
          current_level:
            type: string
          phone_no:
            type: string
          sex:
            type: string
          email:
            type: string
          state_of_origin:
            type: string
          lga_of_origin:
            type: string
      table_to_populate:
        type: string
      courses:
        type: object
        properties:
          first_sem:
            type: array
            items:
              type: string
          second_sem:
            type: array
            items:
              type: string
      error:
        type: string

  CourseRegistration_post:
    type: object
    properties:
      mat_no:
        type: string
      table_to_populate:
        type: string
      session:
        type: integer
      level:
        type: integer
      courses:
        type: object
        properties:
          first_sem:
            type: array
            items:
              type: string
          second_sem:
            type: array
            items:
              type: string
