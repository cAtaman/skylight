from sms.config import db, ma


class PersonalInfo(db.Model):
    __bind_key__ = '##NAME##'
    __tablename__ = 'PersonalInfo'
    mat_no = db.Column('MATNO', db.String(10), primary_key=True, unique=True)
    surname = db.Column('SURNAME', db.Text, nullable=False)
    othernames = db.Column('OTHERNAMES', db.Text, nullable=False)
    mode_of_entry = db.Column('MODE_OF_ENTRY', db.Integer, nullable=False)
    session_admitted = db.Column('SESSION_ADMIT', db.Integer, nullable=False)
    session_grad = db.Column('SESSION_GRADUATED', db.Integer, nullable=True)
    current_level = db.Column('CURRENT_LEVEL', db.Integer, nullable=True)
    option = db.Column('OPTION', db.String(6), nullable=True)
    sex = db.Column('SEX', db.String(1), nullable=False)
    date_of_birth = db.Column('DATE_OF_BIRTH', db.String(10), nullable=False)
    state_of_origin = db.Column('STATE_OF_ORIGIN', db.Text, nullable=False)
    phone_no = db.Column('PHONE_NO', db.String(11), nullable=False)
    email_address = db.Column('EMAIL_ADDRESS', db.String(100), nullable=False)
    sponsor_phone_no = db.Column('SPONSOR_PHONE_NO', db.String(11), nullable=False)
    sponsor_email_address = db.Column('SPONSOR_EMAIL_ADDRESS', db.String(100), nullable=False)
    grad_stats = db.Column('GRAD_STATUS', db.Integer, nullable=False)
    is_symlink = db.Column('IS_SYMLINK', db.Integer, nullable=False)
    database = db.Column('DATABASE', db.String(12), nullable=False)


class PersonalInfoSchema(ma.ModelSchema):
    class Meta:
        model = PersonalInfo
        exclude = ('is_symlink', 'database')
        sqla_session = db.session
